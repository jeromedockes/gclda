

.. _sphx_glr_auto_examples_02_general_plot_decode_unthresholded.py:



.. _dec4:

========================================
 Decode unthresholded map
========================================

An example of decode.Decoder.decode_continuous.



Start with the necessary imports
--------------------------------



.. code-block:: python

    from os.path import join
    import matplotlib.pyplot as plt

    import nibabel as nib
    from nilearn import plotting

    from gclda.model import Model
    from gclda.decode import decode_continuous
    from gclda.utils import get_resource_path







Load model and initialize decoder
----------------------------------



.. code-block:: python

    model_file = join(get_resource_path(), 'models/model_Neurosynth2015Filtered2_temp.pklz')
    model = Model.load(model_file)







Read in image to decode
--------------------------------------



.. code-block:: python

    file_to_decode = '../data/faces_specificity_z.nii.gz'
    img_to_decode = nib.load(file_to_decode)
    fig = plotting.plot_stat_map(img_to_decode, display_mode='z',
                                 threshold=3.290527,
                                 cut_coords=[-28, -4, 20, 50])




.. image:: /auto_examples/02_general/images/sphx_glr_plot_decode_unthresholded_001.png
    :align: center




Decode ROI
-----------



.. code-block:: python

    df, topic_weights = decode_continuous(model, img_to_decode)







Get associated terms
---------------------



.. code-block:: python

    df = df.sort_values(by='Weight', ascending=False)
    print(df.head(10))





.. rst-class:: sphx-glr-script-out

 Out::

    Weight
    Term                 
    visual       0.016861
    motor        0.015782
    face         0.011346
    faces        0.010040
    emotional    0.007714
    spatial      0.005245
    words        0.005074
    memory       0.004608
    perceptual   0.004486
    stimulation  0.003797


Plot topic weights
------------------



.. code-block:: python

    fig2, ax2 = plt.subplots()
    ax2.plot(topic_weights)
    ax2.set_xlabel('Topic #')
    ax2.set_ylabel('Weight')
    fig2.show()



.. image:: /auto_examples/02_general/images/sphx_glr_plot_decode_unthresholded_002.png
    :align: center




**Total running time of the script:** ( 0 minutes  48.581 seconds)



.. only :: html

 .. container:: sphx-glr-footer


  .. container:: sphx-glr-download

     :download:`Download Python source code: plot_decode_unthresholded.py <plot_decode_unthresholded.py>`



  .. container:: sphx-glr-download

     :download:`Download Jupyter notebook: plot_decode_unthresholded.ipynb <plot_decode_unthresholded.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.readthedocs.io>`_
