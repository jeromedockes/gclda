

.. _sphx_glr_auto_examples_plot_encode.py:



.. _enc1:

=========================================
 Encode text into image
=========================================

An example of decode.Decoder.encode.



Start with the necessary imports
--------------------------------



.. code-block:: python

    from os.path import join
    import matplotlib.pyplot as plt

    from nilearn import plotting

    from gclda.model import Model
    from gclda.decode import Decoder
    from gclda.utils import get_resource_path





.. rst-class:: sphx-glr-script-out

 Out::

    Bootstrapped meta-analyses are enabled.


Load model and initialize decoder
----------------------------------



.. code-block:: python

    model_file = join(get_resource_path(), 'models/model_Neurosynth2015Filtered2_temp.pklz')
    model = Model.load(model_file)
    decoder = Decoder(model)







Encode text into image
----------------------



.. code-block:: python

    text = 'painful stimulation during a language task'
    text_img, topic_weights = decoder.encode(text)







Show encoded image
---------------------



.. code-block:: python

    fig = plotting.plot_stat_map(text_img, display_mode='z',
                                 threshold=0.00001,
                                 cut_coords=[-2, 22, 44, 66])




.. image:: /auto_examples/images/sphx_glr_plot_encode_001.png
    :align: center




Plot topic weights
------------------



.. code-block:: python

    fig2, ax2 = plt.subplots()
    ax2.plot(topic_weights)
    ax2.set_xlabel('Topic #')
    ax2.set_ylabel('Weight')
    fig2.show()



.. image:: /auto_examples/images/sphx_glr_plot_encode_002.png
    :align: center




**Total running time of the script:** ( 0 minutes  39.709 seconds)



.. only :: html

 .. container:: sphx-glr-footer


  .. container:: sphx-glr-download

     :download:`Download Python source code: plot_encode.py <plot_encode.py>`



  .. container:: sphx-glr-download

     :download:`Download Jupyter notebook: plot_encode.ipynb <plot_encode.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.readthedocs.io>`_
